<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ë‹¬ì˜ ëª©í‘œ ë‹¬ë ¥</title>
    <style>
        body {
          font-family: 'Arial', sans-serif;
          background: #f0f0f5;
          padding: 20px;
          max-width: 480px;
          margin: auto;
        }

        h2 {
          margin-bottom: 0.5rem;
        }

        .goal-container {
          background: #fff;
          padding: 1rem;
          border-radius: 12px;
          margin-bottom: 1rem;
          box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
        }

        .goal-container input {
          width: 70%;
          padding: 8px;
          font-size: 1rem;
          border: 1px solid #ccc;
          border-radius: 6px;
        }

        .goal-container button {
          padding: 8px 12px;
          font-size: 1rem;
          background-color: #888eff;
          color: white;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          margin-left: 8px;
        }

        #saved-goal {
          margin-top: 0.5rem;
          font-weight: bold;
          color: #444;
        }

        .icon-picker {
          background: #fff;
          padding: 0.8rem;
          border-radius: 12px;
          margin-bottom: 1rem;
          box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
          text-align: center;
        }

        .icon-picker span {
          font-size: 28px;
          margin: 0 8px;
          cursor: pointer;
          transition: transform 0.2s;
        }

        .icon-picker span.selected {
          transform: scale(1.3);
          border-bottom: 2px solid #888eff;
        }

        .calendar {
          background: #fff;
          padding: 1rem;
          border-radius: 12px;
          box-shadow: 0 0 8px rgba(0, 0, 0, 0.05);
        }

        table {
          width: 100%;
          border-collapse: collapse;
          text-align: center;
        }

        th {
          color: #888eff;
          padding: 8px 0;
        }

        td {
          width: 14.2%;
          height: 50px;
          cursor: default;
          font-size: 20px;
          user-select: none;
        }

        td.today {
          color: #000;
          font-weight: bold;
          background-color: #fffbe6;
          border-radius: 6px;
          cursor: pointer;
        }

        td.checked {
          background-color: #e6ffe6;
          pointer-events: none;
        }

        td:hover.today:not(.checked) {
          background-color: #f0f0ff;
        }
    </style>
</head>
<body>

<div class="goal-container">
    <h2>ğŸ¯ ì´ë²ˆ ë‹¬ì˜ ëª©í‘œ</h2>
    <input type="text" id="goal-input" placeholder="ì˜ˆ: ë§¤ì¼ ìš´ë™í•˜ê¸°">
    <button onclick="saveGoal()">ì €ì¥</button>
    <p id="saved-goal"></p>
</div>

<div class="icon-picker">
    <span onclick="selectIcon(this, 'â¤ï¸')">â¤ï¸</span>
    <span onclick="selectIcon(this, 'ğŸ’ª')">ğŸ’ª</span>
    <span onclick="selectIcon(this, 'ğŸŒŸ')">ğŸŒŸ</span>
    <span onclick="selectIcon(this, 'ğŸ”¥')">ğŸ”¥</span>
    <span onclick="selectIcon(this, 'ğŸ§ ')">ğŸ§ </span>
</div>

<div class="calendar">
    <h2 style="text-align: center;">ğŸ“… 2025ë…„ 7ì›”</h2>
    <table id="calendar-table">
        <thead>
        <tr>
            <th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th>
        </tr>
        </thead>
        <tbody id="calendar-body">
        <!-- JSë¡œ ìë™ ìƒì„± -->
        </tbody>
    </table>
</div>

<script>
    let selectedIcon = 'â¤ï¸';
    const checkedDates = {}; // ì˜¤ëŠ˜ ì¸ì¦í•œ ë‚ ì§œ ì €ì¥

    function saveGoal() {
      const input = document.getElementById('goal-input');
      const display = document.getElementById('saved-goal');
      display.textContent = 'ğŸŒŸ ëª©í‘œ: ' + input.value;
      input.value = '';
    }

    function selectIcon(elem, icon) {
      selectedIcon = icon;
      document.querySelectorAll('.icon-picker span').forEach(span => {
        span.classList.remove('selected');
      });
      elem.classList.add('selected');
    }

    function generateCalendar(year, month) {
      const tbody = document.getElementById('calendar-body');
      tbody.innerHTML = '';

      const firstDay = new Date(year, month - 1, 1);
      const lastDate = new Date(year, month, 0).getDate();
      const startDay = firstDay.getDay();

      const today = new Date();
      const todayDate = today.getDate();
      const isThisMonth = today.getFullYear() === year && (today.getMonth() + 1) === month;

      let row = document.createElement('tr');
      for (let i = 0; i < startDay; i++) {
        row.appendChild(document.createElement('td'));
      }

      for (let date = 1; date <= lastDate; date++) {
        const cell = document.createElement('td');
        cell.textContent = date;

        // ì˜¤ëŠ˜ ë‚ ì§œë§Œ ì²´í¬ ê°€ëŠ¥
        if (isThisMonth && date === todayDate) {
          cell.classList.add('today');

          cell.addEventListener('click', function () {
            // ì´ë¯¸ ì²´í¬í–ˆëŠ”ì§€ í™•ì¸
            if (checkedDates[date]) {
              alert("ì˜¤ëŠ˜ì€ ì´ë¯¸ ì²´í¬í–ˆì–´ìš”! ë‚´ì¼ ë˜ ë„ì „í•´ë³´ì„¸ìš” ğŸ˜„");
              return;
            }

            const answer = prompt("ì˜¤ëŠ˜ ì–´ë–¤ ë…¸ë ¥ì„ í–ˆë‚˜ìš”?");
            if (answer && answer.trim() !== "") {
              this.textContent = selectedIcon;
              this.classList.add('checked');
              checkedDates[date] = {
                icon: selectedIcon,
                memo: answer
              };
            } else {
              alert("ì…ë ¥ ë‚´ìš©ì„ ì‘ì„±í•´ì•¼ ì²´í¬í•  ìˆ˜ ìˆì–´ìš”!");
            }
          });
        } else {
          cell.style.color = "#aaa";
          cell.style.cursor = "not-allowed";
        }

        row.appendChild(cell);
        if ((startDay + date) % 7 === 0) {
          tbody.appendChild(row);
          row = document.createElement('tr');
        }
      }
      tbody.appendChild(row);
    }

    // ì´ˆê¸°í™”
    generateCalendar(2025, 7);
    document.querySelectorAll('.icon-picker span')[0].classList.add('selected');
</script>

</body>
</html>
